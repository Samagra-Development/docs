(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{143:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return m}));var a=n(1),r=n(9),o=(n(0),n(238)),s={id:"CommunicationOrchestrator",title:"Conversation Logic Manager",sidebar_label:"Logic Manager"},i={id:"CommunicationOrchestrator",title:"Conversation Logic Manager",description:"## 1. Conversation Logic Manager",source:"@site/docs/Communication - Orchestrator.md",permalink:"/docs/docs/CommunicationOrchestrator",editUrl:"https://github.com/Samagra-Development/docs/edit/master/docs/Communication - Orchestrator.md",sidebar_label:"Logic Manager",sidebar:"someSidebar",previous:{title:"Conversation Transformer",permalink:"/docs/docs/CommunicationTransformer"},next:{title:"XMessage Specification",permalink:"/docs/docs/XMessageSpec"}},c=[{value:"1. Conversation Logic Manager",id:"1-conversation-logic-manager",children:[]},{value:"2. Adding rules to orchestrator",id:"2-adding-rules-to-orchestrator",children:[]},{value:"4. FAQs",id:"4-faqs",children:[]},{value:"Coming Soon",id:"coming-soon",children:[]}],l={rightToc:c};function m(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"1-conversation-logic-manager"},"1. Conversation Logic Manager"),Object(o.b)("p",null,"It redistributes/relays the input messages based on the type of action that needs to be performed on each individual message. It can pick up streams of messages from all topics but generally relays the messages coming to the inbound topic."),Object(o.b)("p",null,"Underlying it has two components"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Broker: Acts both as a broker for messages and Stream Processor for transformer. Kafka is internally used as a broker"),Object(o.b)("li",{parentName:"ul"},"Delegator: Broker is the dumb part of the system whereas StreamProcess embeds the business logic to the broker. It redistributes/relays the input messages based on the type of action that needs to be performed on each individual message. It can pick up streams of messages from all topics but generally relays the messages coming to the inbound topic. Drools is used as a delegator. A simple figure showing what it does,")),Object(o.b)("p",null,Object(o.b)("img",Object(a.a)({parentName:"p"},{src:"https://samagra-development.github.io/docs/img/drools.png",alt:null}))),Object(o.b)("h2",{id:"2-adding-rules-to-orchestrator"},"2. Adding rules to orchestrator"),Object(o.b)("p",null,"Orchestrator is simply a list of rules that govern the messaging pipelines. Essentially it does the following things"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Adding a context to the message"),Object(o.b)("li",{parentName:"ul"},"Manage which transformer to assign to a message"),Object(o.b)("li",{parentName:"ul"},"Manage the start of a campaign"),Object(o.b)("li",{parentName:"ul"},"Manage messages lifecycle based on their current state (message state)")),Object(o.b)("p",null,"The orchestrator uses an excel sheet to manage rules for how and what to do with a current message. This is done using the MessageRosa class. To sheet is divided into two sections ",Object(o.b)("inlineCode",{parentName:"p"},"Conditions")," and ",Object(o.b)("inlineCode",{parentName:"p"},"Actions"),". ",Object(o.b)("inlineCode",{parentName:"p"},"Conditions")," are evaluated for each message and for the messages for all the conditions pass, relevant ",Object(o.b)("inlineCode",{parentName:"p"},"actions")," are taken. There is no limit on the number of contiions or actions taken. Similarly since all the messages go through all the rules, ordering them is important and a single message could have multiple positive conditions and thus multiple actions being taken on them."),Object(o.b)("p",null,"A sample list of rules is shown below."),Object(o.b)("p",null,Object(o.b)("img",Object(a.a)({parentName:"p"},{src:"https://samagra-development.github.io/docs/img/rules-1.png",alt:null}))),Object(o.b)("p",null,"In the above pic the class used for the rules is XMessage. You can look at it ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/Samagra-Development/message-rosa/blob/master/src/main/java/messagerosa/core/model/XMessage.java"}),"here")," and check the available methods. All getter and setters are public so any field can be an ",Object(o.b)("inlineCode",{parentName:"p"},"action")," or a ",Object(o.b)("inlineCode",{parentName:"p"},"condition"),"."),Object(o.b)("h2",{id:"4-faqs"},"4. FAQs"),Object(o.b)("p",null,"To be added based on incoming feedback"),Object(o.b)("h2",{id:"coming-soon"},"Coming Soon"),Object(o.b)("p",null,"Please review the following section to get information about planned updates to this module."))}m.isMDXComponent=!0},238:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),m=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i({},t,{},e)),n},u=function(e){var t=m(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=m(n),b=a,d=u["".concat(s,".").concat(b)]||u[b]||p[b]||o;return n?r.a.createElement(d,i({ref:t},l,{components:n})):r.a.createElement(d,i({ref:t},l))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=b;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var l=2;l<o;l++)s[l]=n[l];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);
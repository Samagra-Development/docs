(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{187:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return d}));var a=n(1),o=n(9),i=(n(0),n(233)),r={id:"deploysamwad",title:"Deploy Your Own Samwad",sidebar_label:"Deploy Samwad"},l={id:"deploysamwad",title:"Deploy Your Own Samwad",description:"## 1. Overview",source:"@site/docs/Deploy Samwad.md",permalink:"/docs/docs/deploysamwad",editUrl:"https://github.com/Samagra-Development/docs/edit/master/docs/Deploy Samwad.md",sidebar_label:"Deploy Samwad",sidebar:"someSidebar",previous:{title:"Samwad - Functional Specifications",permalink:"/docs/docs/SamwadFuncSpecs"},next:{title:"Pariksha - Functional Specifications",permalink:"/docs/docs/ParikshaFuncSpecs"}},c=[{value:"1. Overview",id:"1-overview",children:[{value:"1.1 Disclaimer",id:"11-disclaimer",children:[]}]},{value:"2. Setting up the backend",id:"2-setting-up-the-backend",children:[{value:"1. Setting up FusionAuth",id:"1-setting-up-fusionauth",children:[]},{value:"2. Setting up ODK Aggregate.",id:"2-setting-up-odk-aggregate",children:[]},{value:"3. Setting up form authorizations",id:"3-setting-up-form-authorizations",children:[]},{value:"4. Setting up backend connectors and servers.",id:"4-setting-up-backend-connectors-and-servers",children:[]}]},{value:"3. Setting up the Mobile App",id:"3-setting-up-the-mobile-app",children:[{value:"1. Adding the form management module and configuring forms",id:"1-adding-the-form-management-module-and-configuring-forms",children:[]},{value:"2. Setting up the student list download module",id:"2-setting-up-the-student-list-download-module",children:[]},{value:"3. Setting up the cascading dropdown module",id:"3-setting-up-the-cascading-dropdown-module",children:[]},{value:"4. Setting up autofill",id:"4-setting-up-autofill",children:[]},{value:"5. Setting up the Track SMS module.",id:"5-setting-up-the-track-sms-module",children:[]},{value:"6. Adding the login screen",id:"6-adding-the-login-screen",children:[]},{value:"7. Setting up profile screen",id:"7-setting-up-profile-screen",children:[]},{value:"8. Setting up the about us screen",id:"8-setting-up-the-about-us-screen",children:[]}]},{value:"4. Need more help??",id:"4-need-more-help",children:[]},{value:"5. FAQs",id:"5-faqs",children:[]}],s={rightToc:c};function d(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"1-overview"},"1. Overview"),Object(i.b)("p",null,"This doc helps you to setup a Samiksha app on your own."),Object(i.b)("p",null,"The Samwad product can be used for sharing the following updates by the State Education Department to the parents of the children enrolled in government schools:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Send daily attendance information"),Object(i.b)("li",{parentName:"ol"},"Send upcoming school holiday start and end date notification"),Object(i.b)("li",{parentName:"ol"},"Send upcoming parent teacher meeting"),Object(i.b)("li",{parentName:"ol"},"Send homework completion status about a child"),Object(i.b)("li",{parentName:"ol"},"Send notification of an upcoming School Management Committee meeting"),Object(i.b)("li",{parentName:"ol"},"Send assessment information of any summative or formative assessments"),Object(i.b)("li",{parentName:"ol"},"Send subjectwise and gradewise practice questions daily or weekly to parents"),Object(i.b)("li",{parentName:"ol"},"Send guidance or alerts during natural disasters (floods, cyclones, medical emergency such as Covid-19)"),Object(i.b)("li",{parentName:"ol"},"Send school infrastructure upgrade updates"),Object(i.b)("li",{parentName:"ol"},"Share mid-day meal information")),Object(i.b)("h3",{id:"11-disclaimer"},"1.1 Disclaimer"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("em",{parentName:"li"},"Note that this project in alpha and the APIs can change without notice. Please use it at your discretion. Though we use it in production, but the we are yet to close the API specification")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("em",{parentName:"li"},"Note that some of the links may become live in the coming days. Please contact us in case of any queries or if you need to set this up up urgently."))),Object(i.b)("h2",{id:"2-setting-up-the-backend"},"2. Setting up the backend"),Object(i.b)("p",null,"Backend setup requires you to setup four servers, the steps for which are as follows."),Object(i.b)("h3",{id:"1-setting-up-fusionauth"},"1. Setting up ",Object(i.b)("a",Object(a.a)({parentName:"h3"},{href:"https://fusionauth.io/"}),"FusionAuth")),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Setting up Fusionauth server - Please use the official ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://fusionauth.io/docs/v1/tech/installation-guide/"}),"guide")," to install fusionauth servers."),Object(i.b)("li",{parentName:"ol"},"Adding users to the system - Samwad has no user registraction so, depending on the backend/language that you prefer, users can be added in a variety of ways. We recommend using this ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://fusionauth.io/docs/v1/tech/apis/users#import-users"}),"API"),".")),Object(i.b)("h3",{id:"2-setting-up-odk-aggregate"},"2. Setting up ",Object(i.b)("a",Object(a.a)({parentName:"h3"},{href:"https://docs.getodk.org/aggregate-intro/"}),"ODK Aggregate"),"."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.getodk.org/aggregate-install/"}),"Installation")),Object(i.b)("li",{parentName:"ol"},"Add ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://drive.google.com/drive/folders/1wgh25L_YyOi5y2vdPGahC9V1wjOLRna0"}),"these")," forms to ODK. Note: You need to upload the ",Object(i.b)("inlineCode",{parentName:"li"},".xml")," files and the ",Object(i.b)("inlineCode",{parentName:"li"},".xls")," file are for form building only. You will need to add the relevant csv assets to the forms as well.")),Object(i.b)("h3",{id:"3-setting-up-form-authorizations"},"3. Setting up form authorizations"),Object(i.b)("p",null,"The next step is setting up which forms the users will see when they open the app. Setting the following remote config for the app on Firebase with ",Object(i.b)("inlineCode",{parentName:"p"},"all")," as the key name will ensure they see these 5 forms."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'[\n  {\n    "FormID": "esamwad_meeting",\n    "FormName": "\u092e\u0940\u091f\u093f\u0902\u0917 (Meetings)"\n  },\n  {\n    "FormID": "esamwad_holiday",\n    "FormName": "\u091b\u0941\u091f\u094d\u091f\u093f\u092f\u093e\u0902 (Holiday)"\n  },\n  {\n    "FormID": "esamwad_homework",\n    "FormName": "\u0917\u0943\u0939\u0915\u093e\u0930\u094d\u092f  (Homework)"\n  },\n  {\n    "FormID": "esamwad_exam",\n    "FormName": "\u0906\u0915\u0932\u0928 \u0915\u0940 \u0918\u094b\u0937\u0923\u093e (Assessment Announcement)"\n  },\n  {\n    "FormID": "esamwad_attendance",\n    "FormName": "\u0909\u092a\u0938\u094d\u0925\u093f\u0924\u093f (Attendance)"\n  }\n]\n')),Object(i.b)("h3",{id:"4-setting-up-backend-connectors-and-servers"},"4. Setting up backend connectors and servers."),Object(i.b)("p",null,"All this can be done using the ",Object(i.b)("inlineCode",{parentName:"p"},"docker-compose.yml")," file which can be found ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/Samagra-Development/Samwad-backend"}),"here"),". What it essentially does is installs the following things. ",Object(i.b)("em",{parentName:"p"},"[Note: You are free to change the docker file here to increase the capacity of the servers or choose a different deployment strategy depending on the scale.]")),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Setting up production PSQL database"),Object(i.b)("li",{parentName:"ol"},"Setting up production Redis cache"),Object(i.b)("li",{parentName:"ol"},"Setting up the Memcached server"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/Samagra-Development/MS-OTP"}),"Setting up the OTP server")),Object(i.b)("li",{parentName:"ol"},"Setting up the relay server"),Object(i.b)("li",{parentName:"ol"},"Setting up the StudentList service",Object(i.b)("ol",{parentName:"li"},Object(i.b)("li",{parentName:"ol"},"Setting up Google Cloud Storage"),Object(i.b)("li",{parentName:"ol"},"Installing the StudentList service"))),Object(i.b)("li",{parentName:"ol"},"Setting up the ODK ETL Connector"),Object(i.b)("li",{parentName:"ol"},"Settting up the SMS Manager")),Object(i.b)("h2",{id:"3-setting-up-the-mobile-app"},"3. Setting up the Mobile App"),Object(i.b)("h3",{id:"1-adding-the-form-management-module-and-configuring-forms"},"1. Adding the form management module and configuring forms"),Object(i.b)("p",null,"This module will allow us to download and show the forms configured in the Firebase above."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/FormManagementModule"}),"Setting form list button")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/FormManagementModule"}),"Setting up the submission screen"))),Object(i.b)("h3",{id:"2-setting-up-the-student-list-download-module"},"2. Setting up the student list download module"),Object(i.b)("p",null,"Downloads the list of students for a particular school. Please use th following ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:""}),"doc")," to set this up."),Object(i.b)("h3",{id:"3-setting-up-the-cascading-dropdown-module"},"3. Setting up the cascading dropdown module"),Object(i.b)("p",null,"This will allow the app to render the cascading dropdown and fill the details automatically to the form."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:""}),"Adding the gzip file")," of locations to raw files directory"),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:""}),"Linking")," the gzip file to cascading dropdown module")),Object(i.b)("h3",{id:"4-setting-up-autofill"},"4. Setting up autofill"),Object(i.b)("p",null,"If you have setup the forms correctly, this should happen automatically without any changes."),Object(i.b)("h3",{id:"5-setting-up-the-track-sms-module"},"5. Setting up the Track SMS module."),Object(i.b)("p",null,"All SMSes that are sent through the backend have one of the following responses"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Pending"),Object(i.b)("li",{parentName:"ol"},"Failed to send"),Object(i.b)("li",{parentName:"ol"},"Failed to deliver to user"),Object(i.b)("li",{parentName:"ol"},"Still under processing"),Object(i.b)("li",{parentName:"ol"},"Delivered These responses are then shown in the tracking module to see which parent got the message and if not, which stage it is in. To configure the track SMS module please use this ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:""}),"doc"))),Object(i.b)("h3",{id:"6-adding-the-login-screen"},"6. Adding the login screen"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:""}),"Setting up login screen")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:""}),"Connecting FusionAuth to the server"))),Object(i.b)("h3",{id:"7-setting-up-profile-screen"},"7. Setting up profile screen"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:""}),"Setting up the backend server")),Object(i.b)("li",{parentName:"ol"},"Testing the OTP and reset password.")),Object(i.b)("h3",{id:"8-setting-up-the-about-us-screen"},"8. Setting up the about us screen"),Object(i.b)("p",null,"The about us screen is a part of the ancillaryscreens module. Please see this ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:""}),"doc")," to get started."),Object(i.b)("h2",{id:"4-need-more-help"},"4. Need more help??"),Object(i.b)("p",null,"Some of the packages will be added in the coming weeks. Please contact us if you need urgent support in deploying this."),Object(i.b)("h2",{id:"5-faqs"},"5. FAQs"))}d.isMDXComponent=!0},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),d=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},u=function(e){var t=d(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),u=d(n),b=a,h=u["".concat(r,".").concat(b)]||u[b]||p[b]||i;return n?o.a.createElement(h,l({ref:t},s,{components:n})):o.a.createElement(h,l({ref:t},s))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=b;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var s=2;s<i;s++)r[s]=n[s];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);
<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-129291740-2","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129291740-2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-129291740-2",{})</script>

<title data-react-helmet="true">How I fixed a bug in India&#x27;s national vaccination system | My Site</title>

<meta data-react-helmet="true" property="og:title" content="How I fixed a bug in India&#x27;s national vaccination system | My Site"><meta data-react-helmet="true" name="description" content="&gt; One line of code generated lakhs — possibly crores — of vaccination certificates with incorrect ages printed on them, and the power of open-source came in to find a fix"><meta data-react-helmet="true" property="og:description" content="&gt; One line of code generated lakhs — possibly crores — of vaccination certificates with incorrect ages printed on them, and the power of open-source came in to find a fix"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image">

<link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.png">


<link rel="stylesheet" href="/docs/styles.dd38a814.css">


<link rel="preload" href="/docs/styles.a6aa7e2f.js" as="script">

<link rel="preload" href="/docs/runtime~main.e865ef11.js" as="script">

<link rel="preload" href="/docs/main.36b53971.js" as="script">

<link rel="preload" href="/docs/1.1d177bd7.js" as="script">

<link rel="preload" href="/docs/2.6d06dac8.js" as="script">

<link rel="preload" href="/docs/3.52aa1643.js" as="script">

<link rel="preload" href="/docs/ccc49370.595119a7.js" as="script">

<link rel="preload" href="/docs/4429a042.59036051.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/docs/"></a><a target="_self" rel="noopener noreferrer" href="https://tech.samagragovernance.in/" class="navbar__item navbar__link">Tech@Samagra</a><a class="navbar__item navbar__link" href="/docs/docs/ComponentsOverview">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://Samagra-Development.github.io/docs" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/docs/"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a target="_self" rel="noopener noreferrer" href="https://tech.samagragovernance.in/" class="menu__link">Tech@Samagra</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/docs/ComponentsOverview">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/blog">Blog</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://Samagra-Development.github.io/docs" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="blog-main-wrapper"><div class="fake-sidebar"></div><div class="Blog container margin-vert--lg"><div class="row"><div class="col col--9"><article><header><h1 class="margin-bottom--sm blogPostTitle_kDB-">How I fixed a bug in India&#x27;s national vaccination system</h1><div class="margin-bottom--sm"><time datetime="2021-05-28T00:00:00.000Z" class="blogPostDate_2HVl">May 28, 2021</time></div><div class="avatar margin-bottom--md"><a class="avatar__photo-link" href="https://www.linkedin.com/in/bharat-kashyap-india/" target="_blank" rel="noreferrer noopener"><img class="avatar__photo" src="https://samagra-development.github.io/docs/img/blogbk.jpg" alt="Bharat Kashyap"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://www.linkedin.com/in/bharat-kashyap-india/" target="_blank" rel="noreferrer noopener">Bharat Kashyap</a></h4><small class="avatar__subtitle">Engineer, SamagraX</small></div></div></header><section class="markdown"><blockquote><p>One line of code generated lakhs — possibly crores — of vaccination certificates with incorrect ages printed on them, and the power of open-source came in to find a fix</p></blockquote><hr><p>In a capital city ravaged by the second wave of the pandemic and a household swept along with it, the 4th of May 2021 brought with it hope and relief in the form of a vaccination appointment.</p><p>Both of those had been hard to find in the preceding three weeks. During the first wave we had the privilege of looking at graphs and numbers with a sense of detachment; in the middle of April this year —the onset of the second wave — it became deeply personal. My family became pixels on a curve that was rapidly dwarfing last year’s peak, with no bend in sight.</p><p>The appointment, therefore, represented the possibility of a return to &quot;normal&quot;, however fleeting. India had decided to extend its vaccination program to those in the 18-45 age-group only days earlier. The administration and management of this drive was being done through &quot;CoWin&quot; - a government portal where citizens could register and book slots, and on successful vaccination, generate digitally verifiable certificates.</p><p>With some persistence, and a bit of luck, I managed to writhe through crowds, albeit virtual, and book a slot. The first shot was had, and I generated my certificate of partial vaccination through a two-step process on the portal. All relatively smooth, except one issue: my age was printed incorrectly. </p><div style="margin-top:20px;margin-bottom:10px;text-align:center"> <img src="https://i.imgur.com/9ZwwAen.jpg"></div>
Having been wrongly aged by a year was too trivial a concern at the time - I was partially vaccinated, and CoWin had told me to check back twelve weeks later. <p></p><p>Once the situation at home became a bit stable, though, I decided to dig deeper.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="cowin-under-the-hood"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#cowin-under-the-hood" title="Direct link to heading">#</a>CoWin: Under the hood</h4><p>India&#x27;s central vaccine administration and credentialing system is based, in large part, on an open-source project called &quot;<strong>DIVOC<sup id="fnref-1"><a aria-current="page" class="footnote-ref active" href="/docs/blog/cowin#fn-1">1</a></sup></strong>&quot; built and maintained by the eGovernments foundation<sup id="fnref-6"><a aria-current="page" class="footnote-ref active" href="/docs/blog/cowin#fn-6">6</a></sup>, offered under the MIT license. </p><div style="margin-top:20px;margin-bottom:10px;text-align:center"> <img src="https://lh6.googleusercontent.com/tfo5XrWeqFClDlezIOrtoXhohIwIg4jion7xC2IvK0u9IGA5DfvH5Byv4EYe2gKM2y48J2eIeXRfoF3ann2MWdSKFTHWfsrPcqfkFUueKbHyjy_juZz98boVaRtJNKOowd6yfIdP"></div><p></p><p>What that essentially means is that it is free to use for anyone: be it small, private entities or massive ones like the Government of India. What that also means is that its code is freely available for anyone — including you and me — to access.</p><p>The adoption of &quot;open-source&quot; technology for government has not happened overnight in the country. The beginnings were made when <em>Aadhar</em>, a national unique identity project, demonstrated that it was possible to handle &quot;India scale&quot; without licensed,  proprietary products to hold it up. </p><p>The transition has not been easy, and it is far from even being considered close to complete: selling software to government has long been the arena of international technology giants and consulting firms that remain difficult to dislodge, as
the MIT Technology Review <sup id="fnref-2"><a aria-current="page" class="footnote-ref active" href="/docs/blog/cowin#fn-2">2</a></sup> explains:</p><blockquote><p>No one gets fired for hiring Deloitte or IBM. And when vendors keep getting the same kind of work they’ve done badly, there’s no incentive for them not to build a shitty system. Government requests for proposals are often written so they only fit one or a few vendors. You might see a yes or no box for, “Vendor must have worked on a healthcare system that serves over 500,000 people.” I don’t care whether that system exists, I want to know whether people who have to use it hate it.</p></blockquote><p>A recent, relevant example is &quot;VAMS&quot; — The Vaccine Administration Management System — built for the Centers for Disease Control and Prevention (CDC) of the US by Deloitte, as part of a $44 million no-bid contract. What the software does is trivial at best — it does not include certificate generation — and has been met largely with indifference or criticism, as the MIT Technology Review <sup id="fnref-3"><a aria-current="page" class="footnote-ref active" href="/docs/blog/cowin#fn-3">3</a></sup>, again, describes:</p><blockquote><p>Instead, “VAMS has become a cuss word,” Marshall Taylor, head of South Carolina’s health department, <a href="https://www.greenvilleonline.com/story/news/health/2021/01/22/south-carolina-has-vaccinated-18-phase-1-a-populations/4244441001/">told state lawmakers</a> in January. He went on to describe how the system has badly hurt their immunization efforts so far. Faced with a string of problems and bugs, several states, including South Carolina, are choosing to hack together their own solutions, or pay for private systems instead.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="open-source-govtech"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#open-source-govtech" title="Direct link to heading">#</a>Open-source GovTech</h3><p>Invariably, governments are reliant upon legacy software: technology that was purchased and installed decades ago, with costly annual maintenance contracts. To disrupt this is to attempt a notoriously difficult task of software archaeology, but there is a clear framework to evaluate its benefits:</p><ul><li><p><strong>Ownership</strong>: The primary, and very significant, shift that open-source brings inside government technology departments is one of ownership: instead of vendors on whom all responsibility for failure can be pinned, they must step up and own their own software in letter and spirit. It necessitates the cultivation of expertise inside the government instead of it remaining perennially in the custody of those outside - people with no incentive to ever transfer it. </p></li><li><p><strong>Extensibility</strong>: Ownership breeds extensibility.  Open-source software owned by the government can be suitably modified, extended and re-configured to adapt to additional use-cases without tedious contract renegotiations, or worse, additional tendering. </p></li><li><p><strong>Community</strong>:
As XKCD wryly depicts here, almost all of modern digital infrastructure is supported by </p><div style="text-align:center;margin-top:10px;margin-bottom:10px"><img src="https://imgs.xkcd.com/comics/dependency.png"></div> open-source software, maintained by communities of contributors. It is perhaps the most under-appreciated success of the internet: how so many people collaborate remotely to craft software for little monetary gain. For government technology, leveraging this aspect of open-source culture remains the most elusive. Countries like Singapore have taken strong strides to engage the community with their &quot;GovTech&quot; setup. <p></p></li></ul><p>A beginning was made by India&#x27;s National eGovernance Division recently by launching its own version of GitHub called &quot;OpenForge&quot;, but it remains far from being a vibrant repository of government software that it was envisaged to be.</p><p>A nascent GovTech ecosystem has emerged in India in the recent past: eGovernments, EkStep and  — my own organisation — <a href="https://tech.samagragovernance.in/">Samagra</a>, have made rapid strides in building open-source software rapidly deployable to state and national scale. Projects like <a href="https://sunbird.org/">Sunbird</a> are notable examples. </p><p>To engage the community is to be able to build features fast, and crucially, fix issues faster. Issues like an incorrect age being printed on millions of vaccination certificates. </p><div style="margin-top:20px;margin-bottom:10px;text-align:center"><img src="https://lh3.googleusercontent.com/LsI_bpWuzBWnH-OEAsu0kPLkKG2960eMNLu0WT5D2dS3lGJfLWVe4EJNIwJYggqdRbPWwM5k3cLuMVKuSqmGsKBr0-1TwNonGR1weOYSx1ACrpn-6ygx-LCm3Oa53GRato4Dq9cm"></div><p></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="not-just-a-number"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#not-just-a-number" title="Direct link to heading">#</a>Not just a number</h3><p>Days after the appointment, I stumbled upon DIVOC&#x27;s issue board to find an issue titled &quot;Age is reflecting incorrect<sup id="fnref-4"><a aria-current="page" class="footnote-ref active" href="/docs/blog/cowin#fn-4">4</a></sup>&quot;. As you&#x27;d expect, it rang a bell.A discussion was already underway; a few hours of looking into the code and some help from friends later, I was able to identify a solution. It was simply the matter of taking one&#x27;s birth month into account, which the existing code had missed. A single-line fix.</p><p>I proposed it to the maintainers of the project, not entirely sure if a response would be received.</p><p>Within two days, additional members of the community chimed in to suggest alternate implementations, different potential sources of error. It was pointed out that this fix would work only for a certain proportion of users; nevertheless, it would be an improvement. A final fix was agreed upon, and the submission — the single-line fix — was merged into the main codebase. The next day, it was released. </p><div style="margin-top:20px;margin-bottom:10px;text-align:center"> <img src="https://lh6.googleusercontent.com/36tnsDJtcFQAvVbAr8UeRM69gdXi7vkJzHD3_2Oup2hR5oxmxKKd6Q7JMEiItJt2wssxouP6LxjgylwAkJg1o7IDjCsQMOF3FqBUONchsv-mnDD5yd_3KoRNXxpjMpI6xrzEjbVn"></div><p></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="the-foss-way-forward"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-foss-way-forward" title="Direct link to heading">#</a>The FOSS way forward</h3><p>Software written for population scale in India is rapidly following this lead: the best traditions of free and open-source software (FOSS) are being leveraged to create software robust enough to withstand scrutiny and gracious enough to accept contributions that can improve efficiency, and solve issues of any scale. From critical bugs that affect performance and optimise efficiency to relatively minor ones that result in millions of incorrect certificates. </p><p>Not anymore, hopefully. </p><div class="footnotes"><hr><ol><li id="fn-1">Dr. Pramod Varma is a Ph.D in Computer Science, CTO of EkStep Foundation, former Chief Architect at UIDAI, and also — fun-fact — a descendant of Raja Ravi Varma. <a href="https://youtu.be/Jf__XxfjAjI?t=759">Here</a> he is presenting DIVOC and its system design.<a aria-current="page" class="footnote-backref active" href="/docs/blog/cowin#fnref-1">↩</a></li><li id="fn-6"><a href="https://divoc.egov.org.in/">Digital Infrastructure for Vaccination Open Credentialing</a> <a aria-current="page" class="footnote-backref active" href="/docs/blog/cowin#fnref-6">↩</a></li><li id="fn-2"><a href="https://www.technologyreview.com/2021/03/17/1020811/better-tech-government-pandemic-united-states/"><em>Why is it so hard to build government technology?</em></a> (March 2021)<a aria-current="page" class="footnote-backref active" href="/docs/blog/cowin#fnref-2">↩</a></li><li id="fn-3"><a href="https://www.technologyreview.com/2021/01/30/1017086/cdc-44-million-vaccine-data-vams-problems/"><em>What went wrong with America&#x27;s $44 million vaccine data system?</em></a>(Jan 2021)<a aria-current="page" class="footnote-backref active" href="/docs/blog/cowin#fnref-3">↩</a></li><li id="fn-4"><a href="https://github.com/egovernments/DIVOC/issues/546"><em>Age is reflecting incorrect</em></a>&quot;, GitHub Issue #546, DIVOC<a aria-current="page" class="footnote-backref active" href="/docs/blog/cowin#fnref-4">↩</a></li></ol></div></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/docs/blog/tags/cowin">cowin</a><a class="margin-horiz--sm" href="/docs/blog/tags/vaccine">vaccine</a><a class="margin-horiz--sm" href="/docs/blog/tags/certificate">certificate</a><a class="margin-horiz--sm" href="/docs/blog/tags/engineering">engineering</a><a class="margin-horiz--sm" href="/docs/blog/tags/government">government</a><a class="margin-horiz--sm" href="/docs/blog/tags/open-source">open source</a><a class="margin-horiz--sm" href="/docs/blog/tags/govt-engineers">govt engineers</a><a class="margin-horiz--sm" href="/docs/blog/tags/gov-os">govOS</a></div></footer></article><div class="margin-vert--xl"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/blog/auth"><div class="pagination-nav__link--sublabel">Next Post</div><div class="pagination-nav__link--label">Authentication vs Authorisation - Access Management in Software Systems »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_S4Hd"><div class="contents contents__left-border"><ul><li><a href="#open-source-govtech" class="contents__link">Open-source GovTech</a></li><li><a href="#not-just-a-number" class="contents__link">Not just a number</a></li><li><a href="#the-foss-way-forward" class="contents__link">The FOSS way forward</a></li></ul></div></div></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Samagra Development Associates Pvt. Ltd | 2020 | Built with Docusaurus</div></div></div></footer>
</div>

<script src="/docs/styles.a6aa7e2f.js"></script>

<script src="/docs/runtime~main.e865ef11.js"></script>

<script src="/docs/main.36b53971.js"></script>

<script src="/docs/1.1d177bd7.js"></script>

<script src="/docs/2.6d06dac8.js"></script>

<script src="/docs/3.52aa1643.js"></script>

<script src="/docs/ccc49370.595119a7.js"></script>

<script src="/docs/4429a042.59036051.js"></script>


</body>
</html>
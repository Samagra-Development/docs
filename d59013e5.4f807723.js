(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{235:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return u}));var a=n(1),o=n(9),i=(n(0),n(259)),r={id:"CascadingSearchModule",title:"Cascading Dropdowns Module",sidebar_label:"Cascading Dropdowns Module"},l={id:"CascadingSearchModule",title:"Cascading Dropdowns Module",description:"## 1. Overview",source:"@site/docs/Cascading Search Module.md",permalink:"/docs/docs/CascadingSearchModule",editUrl:"https://github.com/Samagra-Development/docs/edit/master/docs/Cascading Search Module.md",sidebar_label:"Cascading Dropdowns Module",sidebar:"someSidebar",previous:{title:"Profile Screens Module",permalink:"/docs/docs/AndroidProfileManagementModule"},next:{title:"Notifications Module",permalink:"/docs/docs/NotificationModule"}},c=[{value:"1. Overview",id:"1-overview",children:[]},{value:"2. Setup Module In Starter App",id:"2-setup-module-in-starter-app",children:[{value:"2.1 Integrate Module",id:"21-integrate-module",children:[]}]},{value:"2.2 Activate Module Functionalities",id:"22-activate-module-functionalities",children:[{value:"2.3 Receive Result Of Cascading Module",id:"23-receive-result-of-cascading-module",children:[]}]}],s={rightToc:c};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"1-overview"},"1. Overview"),Object(i.b)("p",null,"One of the most recurring cases, that we came across while developing apps, was sets vs subsets of data, which refers to that the data collection is based on certain user fields which go on dividing into subsets, for instance - District -> Tehsil -> Block -> Town -> Post Office. Sometimes the list, of the super set or rather consider the heaviness of list for Post offices under a state like Uttar Pradesh. So in order to provide a better user experience, we decided to use fuzzy search to filter out the data as the user keeps going from a higher level to lower level of demarcation. You can, as a developer modify this module as per your requirement, and extend it to n number of levels, if you would require so. "),Object(i.b)("p",null,"In order to understand the functioning of the module, we will help you set up a sample module that you can use to integrate into your app. We use Firebase Remote Storage to get the required mapping file, which is required by the user to fill forms etc. The file is stored in the res/raw folder in a gzip format, to occupy less space."),Object(i.b)("p",null,"In order to remotely change this file, we have also included a provision via FirebaseRemoteConfig to download this file and then replace the pre existing gzip file."),Object(i.b)("p",null,"We also have a module included in our commons module to unzip the mentioned file in local device storage which can be further read and filtered out as per the user's requirements. You can receive the results of the Cascading Module and then use further."),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"https://media.giphy.com/media/Te0KtAVOXYoGxWvnin/giphy.gif",alt:null}))),Object(i.b)("h2",{id:"2-setup-module-in-starter-app"},"2. Setup Module In Starter App"),Object(i.b)("p",null,"Unzip the github project to a folder. You can find the github repository at this ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/Samagra-Development/mobile-cascaded-search"}),"link"),". "),Object(i.b)("p",null,"Download it as zip locally and then unzip the root directory. Launch Android Studio. Open the main project where you are to integrate these modules."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Note: Please note that,before you start integrating the module into your project, please do get a run thorugh the demo project downloaded from the github repository, to understand the user flow.")),Object(i.b)("h3",{id:"21-integrate-module"},"2.1 Integrate Module"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Note: This is applicable for any android module, you want to import.")),Object(i.b)("p",null,"2.1.1 If you have not commons module in the project, you would need to integrate these first sequentially, to integrate the cascading_module module later, using the following steps."),Object(i.b)("p",null,"2.1.2 Import the library module to your project (the library source becomes part of your project). Click File > New > Import Module"),Object(i.b)("p",null,"2.1.3 Select the source directory of the Module you want to import and click Finish. The library module is copied to your project, so you can actually edit the library code."),Object(i.b)("p",null,"2.1.4 Open the Dependencies tab."),Object(i.b)("p",null,"2.1.5 Click the (+) icon and select Module Dependency. Select the module and click Ok."),Object(i.b)("p",null,"2.1.6 Open your build.gradle file and check that the module is now listed under dependencies."),Object(i.b)("p",null,"2.1.7 Sync your gradle. Clean your project."),Object(i.b)("p",null,"2.1.8 Please follow the same steps for the integration of cascading_module module."),Object(i.b)("p",null,"2.1.9 Open the app module's build.gradle file and add a new line to the dependencies block as shown in the following snippet and then run the ",Object(i.b)("inlineCode",{parentName:"p"},"gradle-sync"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"dependencies { \n    implementation project(':cascading_module');\n    }\n")),Object(i.b)("p",null,"2.1.10 Make sure the library is listed at the top of your settings.gradle file, as shown here for a library named ':cascading_module'. This means for other modules included as well.",Object(i.b)("br",null),Object(i.b)("br",null)),Object(i.b)("h2",{id:"22-activate-module-functionalities"},"2.2 Activate Module Functionalities"),Object(i.b)("p",null,"2.2.1 You need to have Storage Permissions to unzip the file and store it in local storage. For this add to the AndroidManifest.xml"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-xml"}),'\n    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />\n    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />\n    <uses-permission android:name="android.permission.READ_PHONE_STATE" />\n')),Object(i.b)("p",null,"2.2.2 Add the following code snippet to get user's consent to storage permission"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"PermissionsHelper permissionUtils = new PermissionsHelper();\n        if (!PermissionsHelper.areStoragePermissionsGranted(activityContext)) {\n            permissionUtils.requestStoragePermissions(activityContext, new AppPermissionUserActionListener() {\n                @Override\n                public void granted() {\n                //User grants storage permissions.\n                }\n                @Override\n                public void denied() {\n                //User grants denies permissions.\n                }\n            });\n        } else {\n            //User has already granted Storage permissions.\n        }\n")),Object(i.b)("p",null,"2.2.3  In order to unzip the locally stored file, we will use this following function"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"})," FileUnzipper fileUnzipper = new FileUnzipper(getMvpView().getActivityContext(), pathJSONFile, Resource_ID_GZIP_FILE, new UnzipTaskListener() {\n                        @Override\n            public void unZipSuccess() {\n              //If Unzipping operation is successful\n            }\n\n            @Override\n            public void unZipFailure(Exception exception) {\n            //If Unzipping operation is failed, exception is returned.\n\n            }\n        });\n        fileUnzipper.unzipFile();\n")),Object(i.b)("p",null,"2.2.4 In order to use this module, attact the module from the Main app module using the following code snippet"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"CascadingModuleDriver.init(getMainApplication(),FILE_PATH);\n")),Object(i.b)("p",null,"The method signature of the invocation is shown below:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"    /**\n     * \n     * @param mainApplication - Instance of Main Application,\n     * instance of Interface implemented by Application class to\n     * communicate back with main app project.\n     * @param FILE_PATH - File path where you have unzipped your * file.\n     */\n     void init( @NonNull MainApplication mainApplication, @NonNull String FILE_PATH);\n")),Object(i.b)("p",null,"2.2.5 You can launch the cascading view using the following method invocation."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"})," CascadingModuleDriver.launchSearchView(activityContext, FILE_PATH);\n")),Object(i.b)("p",null,"The method signature of the invocation is shown below:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"    /**\n     * \n     * @param activityContext - Instance of Context.\n     * @param FILE_PATH - File path where you have unzipped your * file.\n     */\n     void init( @NonNull Context activityContext, @NonNull String FILE_PATH);\n")),Object(i.b)("h3",{id:"23-receive-result-of-cascading-module"},"2.3 Receive Result Of Cascading Module"),Object(i.b)("p",null,"The result is sent back to the main app module by the CascadingModuleDriver, via the RxBus as follows:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"})," ExchangeObject.DataExchangeObject dataExchangeObject = new ExchangeObject.DataExchangeObject(Modules.MAIN_APP, Modules.CASCADING_SEARCH,selectedHospitalData);\n        application.getEventBus().send(dataExchangeObject);\n")),Object(i.b)("p",null,"You can intercept the result of the event bus as follows:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'compositeDisposable.add(this.getEventBus()\n                .toObservable().subscribeOn(Schedulers.io())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe(new Consumer() {\n                    @Override\n                    public void accept(Object exchangeObject) throws Exception {\n                        if (exchangeObject instanceof ExchangeObject) {\n                                if (exchangeObject instanceof ExchangeObject.DataExchangeObject) {\n                                Timber.d("Data Received" + ((ExchangeObject.DataExchangeObject) exchangeObject).data.toString());\n                            } else {\n                                Timber.e("Received but not intended");\n                            }\n                        }\n                    }\n                }, Timber::e));\n')),Object(i.b)("p",null,"The result object contains in form of DataExchangeObject, the values of all the levels from selected options in the module."))}u.isMDXComponent=!0},259:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),u=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},d=function(e){var t=u(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),d=u(n),b=a,h=d["".concat(r,".").concat(b)]||d[b]||p[b]||i;return n?o.a.createElement(h,l({ref:t},s,{components:n})):o.a.createElement(h,l({ref:t},s))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=b;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var s=2;s<i;s++)r[s]=n[s];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{209:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return u}));var a=n(1),i=n(9),l=(n(0),n(238)),r={id:"PDFBuildAPlugin",title:"Building A Plugin",sidebar_label:"Building A Plugin"},o={id:"PDFBuildAPlugin",title:"Building A Plugin",description:"## 1. Overview",source:"@site/docs/PDF Module - Extending the base.md",permalink:"/docs/docs/PDFBuildAPlugin",editUrl:"https://github.com/Samagra-Development/docs/edit/master/docs/PDF Module - Extending the base.md",sidebar_label:"Building A Plugin",sidebar:"someSidebar",previous:{title:"HTML Pages to PDF",permalink:"/docs/docs/HTML2PDF"},next:{title:"Architecture",permalink:"/docs/docs/PDFModuleArchitecture"}},c=[{value:"1. Overview",id:"1-overview",children:[]},{value:"2. Building your own plugin from scratch",id:"2-building-your-own-plugin-from-scratch",children:[{value:"2.1 Building the actual plugin",id:"21-building-the-actual-plugin",children:[]},{value:"2.2 Adding the plugin to the main system",id:"22-adding-the-plugin-to-the-main-system",children:[]},{value:"2.3 Starting the system",id:"23-starting-the-system",children:[]}]},{value:"3. Extending a Plugin already written",id:"3-extending-a-plugin-already-written",children:[]},{value:"3. FAQs",id:"3-faqs",children:[]},{value:"4. Coming Soon",id:"4-coming-soon",children:[]}],s={rightToc:c};function u(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(l.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"1-overview"},"1. Overview"),Object(l.b)("p",null,"We have defined what a plugin is ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"bla"}),"here"),". Every now and then, you would feel the need to either build a plugin, extend a plugin or fix a broken plugin. To be able to do that, you need to have a very basic understanding of how a plugin works and what is the structure described in the following sections. If you want to look at the architecture of the whole thing first to get a bigger picture, please go ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"bla"}),"here"),"."),Object(l.b)("h2",{id:"2-building-your-own-plugin-from-scratch"},"2. Building your own plugin from scratch"),Object(l.b)("h3",{id:"21-building-the-actual-plugin"},"2.1 Building the actual plugin"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"All plugins implements ",Object(l.b)("inlineCode",{parentName:"li"},"PDFPlugin")," interface For example take a look at the source code of ",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/ChakshuGautam/PDF-Package/blob/master/src/plugin/GoogleDocPlugin/external.py"}),"GoogleDocPlugin/external.py")," and see line number 16")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),"class GoogleDocsSheetsPlugin(implements(PDFPlugin)):\n")),Object(l.b)("p",null,"So what is a ",Object(l.b)("inlineCode",{parentName:"p"},"PDFPlugin"),"? It looks something like this."),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),"class PDFPlugin(Interface):\n    def fetch_data(self):\n        pass\n\n    def fetch_mapping(self,data):\n        pass\n\n    def build_PDF(self,raw_data,file_name):\n        pass\n\n    def upload_PDF(self,key, file):\n        pass\n\n    def retrieve_PDF(self, key):\n        pass\n")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Define Body of Following function: 1. ",Object(l.b)("strong",{parentName:"li"},Object(l.b)("em",{parentName:"strong"},"fetch_data")),": this will fetch new data from webserver and provide this data as dictionary and also combine configuration data and also provide tags if any.",Object(l.b)("ol",Object(a.a)({parentName:"li"},{start:2}),Object(l.b)("li",{parentName:"ol"},Object(l.b)("strong",{parentName:"li"},Object(l.b)("em",{parentName:"strong"},"fetch_mapping")),": This will fetch value mapping and options mapping and combine this with data fetch dictionary and return this complete dictionary."),Object(l.b)("li",{parentName:"ol"},Object(l.b)("strong",{parentName:"li"},Object(l.b)("em",{parentName:"strong"},"build_PDF")),": It will take raw_data and file_name of pdf as input and return filename and pdfUrl."),Object(l.b)("li",{parentName:"ol"},Object(l.b)("strong",{parentName:"li"},Object(l.b)("em",{parentName:"strong"},"upload_PDF")),": This will upload pdf to server or to any other storage and return its filename."),Object(l.b)("li",{parentName:"ol"},Object(l.b)("strong",{parentName:"li"},Object(l.b)("em",{parentName:"strong"},"retrieve_PDF")),": This will take pdf name as input and return pdf content.")))),Object(l.b)("p",null,"-. If we need to add more function in class which needs to be accessible from pdfbase class then they should be first define in PDFPlugin interface."),Object(l.b)("h3",{id:"22-adding-the-plugin-to-the-main-system"},"2.2 Adding the plugin to the main system"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"Import PDFBuilder Class ",Object(l.b)("inlineCode",{parentName:"p"},"from internal import PDFBuilder, PDFPlugin"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"Import Plugin File ",Object(l.b)("inlineCode",{parentName:"p"},"from GoogleDocPlugin.external import GoogleDocsSheetsPlugin"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"Add this class as plugin of PdfBuilder class and also pass config if we need any"))),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),'config = {"retries": 1, "max_concurrency": 2}\napp = PDFBuilder(plugin=GoogleDocsSheetsPlugin(), config=config)\n')),Object(l.b)("h3",{id:"23-starting-the-system"},"2.3 Starting the system"),Object(l.b)("p",null,"Just run the following to test if everything is working fine. ",Object(l.b)("inlineCode",{parentName:"p"},"app.run()")),Object(l.b)("p",null,"Now ",Object(l.b)("inlineCode",{parentName:"p"},"main.py")," will look like :"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),'from .internal import PDFBuilder, PDFPlugin\nfrom plugin.GoogleDocPlugin.external import GoogleDocsSheetsPlugin\n\nif __name__ == "__main__":\n    config = {"retries": 1, "max_concurrency": 2}\n    app = PDFBuilder(plugin=GoogleDocsSheetsPlugin(), config=config)\n    app.run()\n')),Object(l.b)("h2",{id:"3-extending-a-plugin-already-written"},"3. Extending a Plugin already written"),Object(l.b)("p",null,"A lot of times you wouldn't want to write the whole thing and would want to just extend some other plugin that is already written or maybe two and modify the parts that are not the same as the origin plugin. Here you can do this native python classes."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Import the plugin to your plugin folder ",Object(l.b)("inlineCode",{parentName:"li"},"from GoogleDocPlugin.external import GoogleDocsSheetsPlugin")),Object(l.b)("li",{parentName:"ul"},"Create plugin class by extending this superclass and not extending it though the interface. ",Object(l.b)("inlineCode",{parentName:"li"},"class ODKPlugin(GoogleDocsSheetsPlugin)")),Object(l.b)("li",{parentName:"ul"},"All the superclass method are available here. If we need to override the superclass method then we can simply add the method with same name and argument and we can also call the superclass method using super statement. for example : File ",Object(l.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/ChakshuGautam/PDF-Package/blob/master/src/plugin/GoogleDocPlugin/external.py"}),"GoogleDocPlugin/external.py"))),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),"from pdfbase.internal import PDFPlugin\nfrom interface import implements\n\nclass GoogleDocsSheetsPlugin(implements(PDFPlugin)):\n    def __init__(self):\n      with open(os.path.dirname(__file__) + '/googledoc-config.json') as json_file:\n          config = json.load(json_file)\n          self.config = config\n\n    def fetch_data(self):\n      return mappingValues,tags, error\n")),Object(l.b)("p",null,"File ",Object(l.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/ChakshuGautam/PDF-Package/blob/master/src/plugin/ODKPlugin/external.py"}),"ODKPlugin/external.py")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),"from GoogleDocPlugin.external import GoogleDocsSheetsPlugin\n\nclass ODFPlugin(GoogleDocsSheetsPlugin):\n    def fetch_data(self):\n          return mappingValues,tags, error\n    def get_mapping_data(self):\n        super().fetch_data()`\n")),Object(l.b)("h2",{id:"3-faqs"},"3. FAQs"),Object(l.b)("p",null,"To be added based on incoming feedback"),Object(l.b)("h2",{id:"4-coming-soon"},"4. Coming Soon"),Object(l.b)("p",null,"Please review the following section to get information about planned updates to this module."))}u.isMDXComponent=!0},238:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g}));var a=n(0),i=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=i.a.createContext({}),u=function(e){var t=i.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o({},t,{},e)),n},p=function(e){var t=u(e.components);return i.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,r=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=u(n),d=a,g=p["".concat(r,".").concat(d)]||p[d]||b[d]||l;return n?i.a.createElement(g,o({ref:t},s,{components:n})):i.a.createElement(g,o({ref:t},s))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,r=new Array(l);r[0]=d;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:a,r[1]=o;for(var s=2;s<l;s++)r[s]=n[s];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);
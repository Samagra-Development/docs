(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{129:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return b}));var a=n(1),o=n(6),r=(n(0),n(226)),i={id:"cowin",title:"How I fixed a bug in India's national vaccination system",author:"Bharat Kashyap",author_title:"Engineer, SamagraX",author_url:"https://www.linkedin.com/in/bharat-kashyap-india/",author_image_url:"https://samagra-development.github.io/docs/img/blogbk.jpg",tags:["cowin","vaccine","certificate","engineering","government","open source","govt engineers","govOS"]},s={permalink:"/docs/blog/cowin",source:"@site/blog/2021-05-28-cowin-open-source.md",description:"> One line of code generated lakhs \u2014 possibly crores \u2014 of vaccination certificates with incorrect ages printed on them, and the power of open-source came in to find a fix",date:"2021-05-28T00:00:00.000Z",tags:[{label:"cowin",permalink:"/docs/blog/tags/cowin"},{label:"vaccine",permalink:"/docs/blog/tags/vaccine"},{label:"certificate",permalink:"/docs/blog/tags/certificate"},{label:"engineering",permalink:"/docs/blog/tags/engineering"},{label:"government",permalink:"/docs/blog/tags/government"},{label:"open source",permalink:"/docs/blog/tags/open-source"},{label:"govt engineers",permalink:"/docs/blog/tags/govt-engineers"},{label:"govOS",permalink:"/docs/blog/tags/gov-os"}],title:"How I fixed a bug in India's national vaccination system",truncated:!0,nextItem:{title:"Authentication vs Authorisation - Access Management in Software Systems",permalink:"/docs/blog/auth"}},c=[{value:"Open-source GovTech",id:"open-source-govtech",children:[]},{value:"Not just a number",id:"not-just-a-number",children:[]},{value:"The FOSS way forward",id:"the-foss-way-forward",children:[]}],l={rightToc:c};function b(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"One line of code generated lakhs \u2014 possibly crores \u2014 of vaccination certificates with incorrect ages printed on them, and the power of open-source came in to find a fix")),Object(r.b)("hr",null),Object(r.b)("p",null,"In a capital city ravaged by the second wave of the pandemic and a household swept along with it, the 4th of May 2021 brought with it hope and relief in the form of a vaccination appointment."),Object(r.b)("p",null,"Both of those had been hard to find in the preceding three weeks. During the first wave we had the privilege of looking at graphs and numbers with a sense of detachment; in the middle of April this year \u2014the onset of the second wave \u2014 it became deeply personal. My family became pixels on a curve that was rapidly dwarfing last year\u2019s peak, with no bend in sight."),Object(r.b)("p",null,'The appointment, therefore, represented the possibility of a return to "normal", however fleeting. India had decided to extend its vaccination program to those in the 18-45 age-group only days earlier. The administration and management of this drive was being done through "CoWin" - a government portal where citizens could register and book slots, and on successful vaccination, generate digitally verifiable certificates.'),Object(r.b)("p",null,"With some persistence, and a bit of luck, I managed to writhe through crowds, albeit virtual, and book a slot. The first shot was had, and I generated my certificate of partial vaccination through a two-step process on the portal. All relatively smooth, except one issue: my age was printed incorrectly. ",Object(r.b)("div",{style:{marginTop:"20px",marginBottom:"10px",textAlign:"center"}}," ",Object(r.b)("img",Object(a.a)({parentName:"p"},{src:"https://i.imgur.com/9ZwwAen.jpg",alt:null}))),"\nHaving been wrongly aged by a year was too trivial a concern at the time - I was partially vaccinated, and CoWin had told me to check back twelve weeks later. "),Object(r.b)("p",null,"Once the situation at home became a bit stable, though, I decided to dig deeper."),Object(r.b)("h4",{id:"cowin-under-the-hood"},"CoWin: Under the hood"),Object(r.b)("p",null,"India's central vaccine administration and credentialing system is based, in large part, on an open-source project called \"",Object(r.b)("strong",{parentName:"p"},"DIVOC",Object(r.b)("sup",Object(a.a)({parentName:"strong"},{id:"fnref-1"}),Object(r.b)("a",Object(a.a)({parentName:"sup"},{href:"#fn-1",className:"footnote-ref"}),"1"))),'" built and maintained by the eGovernments foundation',Object(r.b)("sup",Object(a.a)({parentName:"p"},{id:"fnref-6"}),Object(r.b)("a",Object(a.a)({parentName:"sup"},{href:"#fn-6",className:"footnote-ref"}),"6")),", offered under the MIT license. ",Object(r.b)("div",{style:{marginTop:"20px",marginBottom:"10px",textAlign:"center"}}," ",Object(r.b)("img",Object(a.a)({parentName:"p"},{src:"https://lh6.googleusercontent.com/tfo5XrWeqFClDlezIOrtoXhohIwIg4jion7xC2IvK0u9IGA5DfvH5Byv4EYe2gKM2y48J2eIeXRfoF3ann2MWdSKFTHWfsrPcqfkFUueKbHyjy_juZz98boVaRtJNKOowd6yfIdP",alt:null})))),Object(r.b)("p",null,"What that essentially means is that it is free to use for anyone: be it small, private entities or massive ones like the Government of India. What that also means is that its code is freely available for anyone \u2014 including you and me \u2014 to access."),Object(r.b)("p",null,'The adoption of "open-source" technology for government has not happened overnight in the country. The beginnings were made when ',Object(r.b)("em",{parentName:"p"},"Aadhar"),', a national unique identity project, demonstrated that it was possible to handle "India scale" without licensed,  proprietary products to hold it up. '),Object(r.b)("p",null,"The transition has not been easy, and it is far from even being considered close to complete: selling software to government has long been the arena of international technology giants and consulting firms that remain difficult to dislodge, as\nthe MIT Technology Review ",Object(r.b)("sup",Object(a.a)({parentName:"p"},{id:"fnref-2"}),Object(r.b)("a",Object(a.a)({parentName:"sup"},{href:"#fn-2",className:"footnote-ref"}),"2"))," explains:"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"No one gets fired for hiring Deloitte or IBM. And when vendors keep getting the same kind of work they\u2019ve done badly, there\u2019s no incentive for them not to build a shitty system. Government requests for proposals are often written so they only fit one or a few vendors. You might see a yes or no box for, \u201cVendor must have worked on a healthcare system that serves over 500,000 people.\u201d I don\u2019t care whether that system exists, I want to know whether people who have to use it hate it.")),Object(r.b)("p",null,'A recent, relevant example is "VAMS" \u2014 The Vaccine Administration Management System \u2014 built for the Centers for Disease Control and Prevention (CDC) of the US by Deloitte, as part of a $44 million no-bid contract. What the software does is trivial at best \u2014 it does not include certificate generation \u2014 and has been met largely with indifference or criticism, as the MIT Technology Review ',Object(r.b)("sup",Object(a.a)({parentName:"p"},{id:"fnref-3"}),Object(r.b)("a",Object(a.a)({parentName:"sup"},{href:"#fn-3",className:"footnote-ref"}),"3")),", again, describes:"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Instead, \u201cVAMS has become a cuss word,\u201d Marshall Taylor, head of South Carolina\u2019s health department, ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.greenvilleonline.com/story/news/health/2021/01/22/south-carolina-has-vaccinated-18-phase-1-a-populations/4244441001/"}),"told state lawmakers")," in January. He went on to describe how the system has badly hurt their immunization efforts so far. Faced with a string of problems and bugs, several states, including South Carolina, are choosing to hack together their own solutions, or pay for private systems instead.")),Object(r.b)("h3",{id:"open-source-govtech"},"Open-source GovTech"),Object(r.b)("p",null,"Invariably, governments are reliant upon legacy software: technology that was purchased and installed decades ago, with costly annual maintenance contracts. To disrupt this is to attempt a notoriously difficult task of software archaeology, but there is a clear framework to evaluate its benefits:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Ownership"),": The primary, and very significant, shift that open-source brings inside government technology departments is one of ownership: instead of vendors on whom all responsibility for failure can be pinned, they must step up and own their own software in letter and spirit. It necessitates the cultivation of expertise inside the government instead of it remaining perennially in the custody of those outside - people with no incentive to ever transfer it. ")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Extensibility"),": Ownership breeds extensibility.  Open-source software owned by the government can be suitably modified, extended and re-configured to adapt to additional use-cases without tedious contract renegotiations, or worse, additional tendering. ")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Community"),":\nAs XKCD wryly depicts here, almost all of modern digital infrastructure is supported by ",Object(r.b)("div",{style:{textAlign:"center",marginTop:"10px",marginBottom:"10px"}},Object(r.b)("img",Object(a.a)({parentName:"p"},{src:"https://imgs.xkcd.com/comics/dependency.png",alt:null}))),' open-source software, maintained by communities of contributors. It is perhaps the most under-appreciated success of the internet: how so many people collaborate remotely to craft software for little monetary gain. For government technology, leveraging this aspect of open-source culture remains the most elusive. Countries like Singapore have taken strong strides to engage the community with their "GovTech" setup. '))),Object(r.b)("p",null,'A beginning was made by India\'s National eGovernance Division recently by launching its own version of GitHub called "OpenForge", but it remains far from being a vibrant repository of government software that it was envisaged to be.'),Object(r.b)("p",null,"A nascent GovTech ecosystem has emerged in India in the recent past: eGovernments, EkStep and  \u2014 my own organisation \u2014 ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://tech.samagragovernance.in/"}),"Samagra"),", have made rapid strides in building open-source software rapidly deployable to state and national scale. Projects like ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://sunbird.org/"}),"Sunbird")," are notable examples. "),Object(r.b)("p",null,"To engage the community is to be able to build features fast, and crucially, fix issues faster. Issues like an incorrect age being printed on millions of vaccination certificates. ",Object(r.b)("div",{style:{marginTop:"20px",marginBottom:"10px",textAlign:"center"}},Object(r.b)("img",Object(a.a)({parentName:"p"},{src:"https://lh3.googleusercontent.com/LsI_bpWuzBWnH-OEAsu0kPLkKG2960eMNLu0WT5D2dS3lGJfLWVe4EJNIwJYggqdRbPWwM5k3cLuMVKuSqmGsKBr0-1TwNonGR1weOYSx1ACrpn-6ygx-LCm3Oa53GRato4Dq9cm",alt:null})))),Object(r.b)("h3",{id:"not-just-a-number"},"Not just a number"),Object(r.b)("p",null,"Days after the appointment, I stumbled upon DIVOC's issue board to find an issue titled \"Age is reflecting incorrect",Object(r.b)("sup",Object(a.a)({parentName:"p"},{id:"fnref-4"}),Object(r.b)("a",Object(a.a)({parentName:"sup"},{href:"#fn-4",className:"footnote-ref"}),"4")),"\". As you'd expect, it rang a bell.A discussion was already underway; a few hours of looking into the code and some help from friends later, I was able to identify a solution. It was simply the matter of taking one's birth month into account, which the existing code had missed. A single-line fix."),Object(r.b)("p",null,"I proposed it to the maintainers of the project, not entirely sure if a response would be received."),Object(r.b)("p",null,"Within two days, additional members of the community chimed in to suggest alternate implementations, different potential sources of error. It was pointed out that this fix would work only for a certain proportion of users; nevertheless, it would be an improvement. A final fix was agreed upon, and the submission \u2014 the single-line fix \u2014 was merged into the main codebase. The next day, it was released. ",Object(r.b)("div",{style:{marginTop:"20px",marginBottom:"10px",textAlign:"center"}}," ",Object(r.b)("img",Object(a.a)({parentName:"p"},{src:"https://lh6.googleusercontent.com/36tnsDJtcFQAvVbAr8UeRM69gdXi7vkJzHD3_2Oup2hR5oxmxKKd6Q7JMEiItJt2wssxouP6LxjgylwAkJg1o7IDjCsQMOF3FqBUONchsv-mnDD5yd_3KoRNXxpjMpI6xrzEjbVn",alt:null})))),Object(r.b)("h3",{id:"the-foss-way-forward"},"The FOSS way forward"),Object(r.b)("p",null,"Software written for population scale in India is rapidly following this lead: the best traditions of free and open-source software (FOSS) are being leveraged to create software robust enough to withstand scrutiny and gracious enough to accept contributions that can improve efficiency, and solve issues of any scale. From critical bugs that affect performance and optimise efficiency to relatively minor ones that result in millions of incorrect certificates. "),Object(r.b)("p",null,"Not anymore, hopefully. "),Object(r.b)("div",{className:"footnotes"},Object(r.b)("hr",{parentName:"div"}),Object(r.b)("ol",{parentName:"div"},Object(r.b)("li",Object(a.a)({parentName:"ol"},{id:"fn-1"}),"Dr. Pramod Varma is a Ph.D in Computer Science, CTO of EkStep Foundation, former Chief Architect at UIDAI, and also \u2014 fun-fact \u2014 a descendant of Raja Ravi Varma. ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://youtu.be/Jf__XxfjAjI?t=759"}),"Here")," he is presenting DIVOC and its system design.",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"#fnref-1",className:"footnote-backref"}),"\u21a9")),Object(r.b)("li",Object(a.a)({parentName:"ol"},{id:"fn-6"}),Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://divoc.egov.org.in/"}),"Digital Infrastructure for Vaccination Open Credentialing")," ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"#fnref-6",className:"footnote-backref"}),"\u21a9")),Object(r.b)("li",Object(a.a)({parentName:"ol"},{id:"fn-2"}),Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://www.technologyreview.com/2021/03/17/1020811/better-tech-government-pandemic-united-states/"}),Object(r.b)("em",{parentName:"a"},"Why is it so hard to build government technology?"))," (March 2021)",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"#fnref-2",className:"footnote-backref"}),"\u21a9")),Object(r.b)("li",Object(a.a)({parentName:"ol"},{id:"fn-3"}),Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://www.technologyreview.com/2021/01/30/1017086/cdc-44-million-vaccine-data-vams-problems/"}),Object(r.b)("em",{parentName:"a"},"What went wrong with America's $44 million vaccine data system?")),"(Jan 2021)",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"#fnref-3",className:"footnote-backref"}),"\u21a9")),Object(r.b)("li",Object(a.a)({parentName:"ol"},{id:"fn-4"}),Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/egovernments/DIVOC/issues/546"}),Object(r.b)("em",{parentName:"a"},"Age is reflecting incorrect")),'", GitHub Issue #546, DIVOC',Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"#fnref-4",className:"footnote-backref"}),"\u21a9")))))}b.isMDXComponent=!0},226:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),b=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s({},t,{},e)),n},p=function(e){var t=b(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},h=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=b(n),h=a,m=p["".concat(i,".").concat(h)]||p[h]||d[h]||r;return n?o.a.createElement(m,s({ref:t},l,{components:n})):o.a.createElement(m,s({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<r;l++)i[l]=n[l];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);
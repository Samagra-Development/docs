<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-129291740-2","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129291740-2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-129291740-2",{})</script>

<title data-react-helmet="true">PSQL Strategy | My Site</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="PSQL Strategy | My Site"><meta data-react-helmet="true" name="description" content="## Objective"><meta data-react-helmet="true" property="og:description" content="## Objective"><meta data-react-helmet="true" property="og:url" content="https://Samagra-Development.github.io/docs/docs/docs/PSQLStrategy">

<link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.png">


<link rel="stylesheet" href="/docs/styles.dd38a814.css">


<link rel="preload" href="/docs/styles.6618b84c.js" as="script">

<link rel="preload" href="/docs/runtime~main.2533fa27.js" as="script">

<link rel="preload" href="/docs/main.6a250a92.js" as="script">

<link rel="preload" href="/docs/1.03d1bcbe.js" as="script">

<link rel="preload" href="/docs/2.d742237a.js" as="script">

<link rel="preload" href="/docs/3.f4459b11.js" as="script">

<link rel="preload" href="/docs/1be78505.a94b9e70.js" as="script">

<link rel="preload" href="/docs/64f9f2ab.5e9cea73.js" as="script">

<link rel="preload" href="/docs/17896441.17975616.js" as="script">

<link rel="preload" href="/docs/032914a5.57c7613b.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/docs/"></a><a target="_self" rel="noopener noreferrer" href="https://tech.samagragovernance.in/" class="navbar__item navbar__link">Tech@Samagra</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/docs/ComponentsOverview">Docs</a><a class="navbar__item navbar__link" href="/docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://Samagra-Development.github.io/docs" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/docs/"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a target="_self" rel="noopener noreferrer" href="https://tech.samagragovernance.in/" class="menu__link">Tech@Samagra</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/docs/ComponentsOverview">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/blog">Blog</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://Samagra-Development.github.io/docs" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">PSQL Strategy</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="objective"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#objective" title="Direct link to heading">#</a>Objective</h2><p>The objective of this doc to be a decision mechanism on what kind of deployment to use for PSQL for different use cases.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="disclaimer"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#disclaimer" title="Direct link to heading">#</a>Disclaimer</h3><ul><li>This is an opionated guide and a lot of systems can provide the same performance and maybe at a lesser cost.</li><li>This is not meant to be a comprehensive guide on PSQL. There are plenty out there and we would recommend yo to read them if you are looking to understand how PSQL works.</li><li>This is not the only way to do things and should be used as a guide more than anything else.</li><li>This is an every evolving doc and is based on our current understanding of the system and is deemed to evolve over time.</li><li>Feel free to send pull requests and evolve this doc further.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="use-cases"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-cases" title="Direct link to heading">#</a>Use Cases</h2><ol><li>Development with local database.</li><li>Development with database on the server with database size less than 5GB or table rows less than a million.</li><li>Development with database on the server with database size &gt; 5GB or table rows more than a million.</li><li>Production database with single microservice depending on it. Size &lt; 5GB and max rows &lt; million.</li><li>Production database with BI tool attached to it. Connection count &lt; 50.</li><li>Production database which needs to serve APIs through microservices and there is no limit to the amount of connections to it and has a BI tool attached to it.</li><li>Production datababase with all the things on point 6 data size upto 2TB.</li><li>Production database with all the things on point 6 and data size &gt; 2TB.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="deployment-strategies"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#deployment-strategies" title="Direct link to heading">#</a>Deployment strategies</h2><p>The deployment strategies have a semantic versioning and anything &gt;= 1 can be used for production. Any minor/major updated to the stregies will evolve that specific version to say 1.1, 1.2 for v1.0. You can see additional components getting added as soon we increase the size of production.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="v01---development-server-with-small-data-1-2"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#v01---development-server-with-small-data-1-2" title="Direct link to heading">#</a>v0.1 - Development Server with small data (1, 2)</h3><p><img src="https://i.ibb.co/JBLBJhh/PSQL-Type0-1.jpg" alt="enter image description here"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="v02---development-server-with-substantial-data-3"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#v02---development-server-with-substantial-data-3" title="Direct link to heading">#</a>v0.2 - Development Server with substantial data (3)</h3><p><img src="https://i.ibb.co/Jjjzz2d/PSQL-Type0-2.jpg" alt="enter image description here"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="v10---small-production-server-4-5"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#v10---small-production-server-4-5" title="Direct link to heading">#</a>v1.0 - Small Production Server (4, 5)</h3><p><img src="https://i.ibb.co/qjcsmvZ/PSQL-Type2.jpg" alt="enter image description here"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="v20---medium-production-server-6-7-8"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#v20---medium-production-server-6-7-8" title="Direct link to heading">#</a>v2.0 - Medium Production Server (6, 7, 8)</h3><p><img src="https://i.ibb.co/QrnyGtr/PSQL-Type3.jpg" alt="enter image description here"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="v30---large-production-server--"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#v30---large-production-server--" title="Direct link to heading">#</a>v3.0 - Large Production Server (-)</h3><p>Coming Soon...</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="features"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#features" title="Direct link to heading">#</a>Features</h4><ol><li>This is no practical limits on the size of data</li><li>No practical limits on computing power utilized.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="comparison-chart"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#comparison-chart" title="Direct link to heading">#</a>Comparison chart</h2><table><thead><tr><th>Indicator</th><th>v0.1</th><th>v0.2</th><th>v1.0</th><th>v2.0</th><th>v3.0</th></tr></thead><tbody><tr><td>Max Database Size (GB)</td><td>1</td><td>5</td><td>2000</td><td>2000</td><td>No limits</td></tr><tr><td>Connection Pooler</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Production Ready</td><td>✗</td><td>✗</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Cost per GB</td><td>x</td><td>2x</td><td>4x</td><td>7x</td><td>7x</td></tr><tr><td>Sharding Capability</td><td>✗</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td></tr><tr><td>Archiving and PITR</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>✓</td></tr><tr><td>Backups</td><td>✗</td><td>✗</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Disaster Recovery</td><td>✗</td><td>✗</td><td>✗</td><td>✓</td><td>✓</td></tr><tr><td>Setup Difficulty</td><td>x</td><td>x</td><td>3x</td><td>5x</td><td>10x</td></tr><tr><td>Maintenance Cost (Dev hours)</td><td>-</td><td>-</td><td>x</td><td>2x</td><td>3x</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="indexing"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#indexing" title="Direct link to heading">#</a>Indexing</h2><p>PSQL is meant to serve queries in less than a milli second and 2 ms should be the limit on all queries. Index things everytime you see anything greater than 2 ms and large number of calls. To monitor what is happening inside the database, intall this contrib PSQL <a href="https://www.postgresql.org/docs/9.5/pgstatstatements.html">extension</a>,</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="sharding"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#sharding" title="Direct link to heading">#</a>Sharding</h2><p>We don&#x27;t recommend sharding in PSQL and up until v2.0 there is no sharding of database. But it really have to, we recommend doing it though <a href="https://citusdata.com/">citus</a>. v3.0 has sharding, and though a small decrease in speed, it works out of the box.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="backups"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#backups" title="Direct link to heading">#</a>Backups</h2><p>We recommend native <a href="https://www.postgresql.org/docs/9.3/continuous-archiving.html">PSQL archiving and PITR</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="disaster-recovery"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#disaster-recovery" title="Direct link to heading">#</a>Disaster Recovery</h2><p>We recommend <a href="https://www.pgbarman.org/">PgBarman</a> for disaster recovery.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Samagra-Development/docs/edit/master/docs/PSQL Strategy.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#objective" class="contents__link">Objective</a><ul><li><a href="#disclaimer" class="contents__link">Disclaimer</a></li></ul></li><li><a href="#use-cases" class="contents__link">Use Cases</a></li><li><a href="#deployment-strategies" class="contents__link">Deployment strategies</a><ul><li><a href="#v01---development-server-with-small-data-1-2" class="contents__link">v0.1 - Development Server with small data (1, 2)</a></li><li><a href="#v02---development-server-with-substantial-data-3" class="contents__link">v0.2 - Development Server with substantial data (3)</a></li><li><a href="#v10---small-production-server-4-5" class="contents__link">v1.0 - Small Production Server (4, 5)</a></li><li><a href="#v20---medium-production-server-6-7-8" class="contents__link">v2.0 - Medium Production Server (6, 7, 8)</a></li><li><a href="#v30---large-production-server--" class="contents__link">v3.0 - Large Production Server (-)</a></li></ul></li><li><a href="#comparison-chart" class="contents__link">Comparison chart</a></li><li><a href="#indexing" class="contents__link">Indexing</a></li><li><a href="#sharding" class="contents__link">Sharding</a></li><li><a href="#backups" class="contents__link">Backups</a></li><li><a href="#disaster-recovery" class="contents__link">Disaster Recovery</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Samagra Development Associates Pvt. Ltd | 2020 | Built with Docusaurus</div></div></div></footer>
</div>

<script src="/docs/styles.6618b84c.js"></script>

<script src="/docs/runtime~main.2533fa27.js"></script>

<script src="/docs/main.6a250a92.js"></script>

<script src="/docs/1.03d1bcbe.js"></script>

<script src="/docs/2.d742237a.js"></script>

<script src="/docs/3.f4459b11.js"></script>

<script src="/docs/1be78505.a94b9e70.js"></script>

<script src="/docs/64f9f2ab.5e9cea73.js"></script>

<script src="/docs/17896441.17975616.js"></script>

<script src="/docs/032914a5.57c7613b.js"></script>


</body>
</html>